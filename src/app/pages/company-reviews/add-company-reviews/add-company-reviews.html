<div class="container mx-auto p-6 max-w-7xl">
  <div class="flex items-center gap-4 mb-6">
    <button
      (click)="goBack()"
      class="p-2 rounded-md hover:bg-gray-100 transition-colors"
      title="Go back"
    >
      <lucide-angular [img]="ArrowLeft" class="w-6 h-6 text-gray-600" />
    </button>
    <h1 class="text-3xl font-bold" style="color: #0d5a4b">
      @if (isEdit) { Edit Company Review } @else { Add New Company Review }
    </h1>
  </div>

  <form [formGroup]="companyReviewForm" (ngSubmit)="onSubmit()" class="space-y-6">
    <!-- Rating -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-2">
        Rating <span class="text-red-500">*</span>
      </label>
      <div class="flex items-center gap-2">
        @for (star of [1, 2, 3, 4, 5]; track star) {
        <button
          type="button"
          (click)="setRating(star)"
          class="focus:outline-none transition-all hover:scale-110"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="32"
            height="32"
            viewBox="0 0 24 24"
            [class]="
              star <= selectedRating ? 'text-yellow-400 fill-yellow-400' : 'text-gray-300 fill-none'
            "
            class="transition-all duration-200"
          >
            <path
              d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </svg>
        </button>
        }
      </div>
      <input
        type="hidden"
        formControlName="rate"
        [class.border-red-500]="f['rate'].invalid && f['rate'].touched"
      />
      @if (f['rate'].invalid && f['rate'].touched) {
      <p class="mt-1 text-sm text-red-500">Please select a rating (1-5 stars)</p>
      } @if (selectedRating > 0) {
      <p class="mt-2 text-sm text-gray-600">Selected: {{ selectedRating }} star(s)</p>
      }
    </div>

    <!-- Review -->
    <div>
      <label for="review" class="block text-sm font-medium text-gray-700 mb-2">
        Review <span class="text-red-500">*</span>
      </label>
      <textarea
        id="review"
        formControlName="review"
        rows="8"
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:border-transparent resize-y"
        style="--tw-ring-color: #e2b43a"
        onfocus="this.style.borderColor='#E2B43A'; this.style.boxShadow='0 0 0 2px rgba(226, 180, 58, 0.2)'"
        onblur="this.style.borderColor=''; this.style.boxShadow=''"
        [class.border-red-500]="f['review'].invalid && f['review'].touched"
        placeholder="Enter your review here..."
      ></textarea>
      @if (f['review'].invalid && f['review'].touched) {
      <p class="mt-1 text-sm text-red-500">Review is required</p>
      }
    </div>

    <!-- Submit Button -->
    <div class="flex gap-4 pt-4">
      <button
        type="submit"
        [disabled]="companyReviewForm.invalid"
        class="px-6 py-2 rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors"
        style="background-color: #e2b43a; color: #0a3022; --tw-ring-color: #e2b43a"
        onmouseover="this.style.backgroundColor='#d4a530'"
        onmouseout="this.style.backgroundColor='#E2B43A'"
      >
        @if (isEdit) { Update Review } @else { Add Review }
      </button>
      <button
        type="button"
        (click)="companyReviewForm.reset(); setRating(0)"
        class="px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors"
      >
        Reset
      </button>
      <button
        type="button"
        (click)="goBack()"
        class="px-6 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2 transition-colors"
      >
        Cancel
      </button>
    </div>
  </form>
</div>
